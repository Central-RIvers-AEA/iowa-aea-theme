{"version":3,"file":"events-list/view.js","mappings":"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","sources":["webpack://interactive-map/external module \"@wordpress/interactivity\"","webpack://interactive-map/webpack/bootstrap","webpack://interactive-map/webpack/runtime/make namespace object","webpack://interactive-map/./src/events-list/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { store, getContext, getElement } from '@wordpress/interactivity';\n\nconst formatDate = ( dateString ) => {\n  let comfortDateString = `${dateString}T00:00:00`\n  const month = new Intl.DateTimeFormat( 'en-US', { month: 'short', timeZone: 'America/Chicago' } ).format( new Date( comfortDateString ) );\n  const day = new Intl.DateTimeFormat( 'en-US', { day: 'numeric', timeZone: 'America/Chicago' } ).format( new Date( comfortDateString ) );\n  const year = new Intl.DateTimeFormat( 'en-US', { year: 'numeric', timeZone: 'America/Chicago' } ).format( new Date( comfortDateString ) );\n  return `<small>${month}</small> <strong>${day}</strong> <small>${year}</small>`;\n};\n\nconst formatTime = ( timeString ) => {\n  if(timeString == 'All Day'){\n    return 'All Day';\n  }\n\n  let [time, modifier] = timeString.split(' ');\n  if (!modifier) {\n    modifier = 'AM';\n  }\n  let [hours, minutes] = time.split(':');\n  hours = parseInt(hours, 10);\n  \n  if (hours > 12) {\n    hours = (hours - 12).toString();\n    modifier = 'PM';\n  }\n\n  return `${hours}:${minutes} ${modifier}`;\n}\n\nconst fetchGoogleCalendarEvents = async (start_date, end_date) => {\n  // Simulate fetching events from Google Calendar API\n  let calendarIDs = state.calendarIDs;\n  let apiKey = state.apiKey;\n\n  let events = [];\n\n  if(!calendarIDs.length || !apiKey) {\n    return [];\n  }\n\n  // For simplicity, fetch from the first calendar ID only\n  let calendarID = calendarIDs[0];\n\n  try {\n    let calendarURL = `https://www.googleapis.com/calendar/v3/calendars/${calendarID}/events?key=${apiKey}&timeMin=${start_date}T00:00:00Z&timeMax=${end_date}T23:59:59Z`;\n  \n    // Fetch events from Google Calendar API\n    const response = await fetch(calendarURL);\n\n    if(!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n   \n    const data = await response.json();\n\n    // Convert Google Calendar events to local format\n     events = data.items.map(gEvent => {\n      let event = {\n        id: gEvent.id,\n        title: { rendered: gEvent.summary },\n        event_date: gEvent.start.date || gEvent.start.dateTime.split('T')[0],\n        event_time: gEvent.start.dateTime ? formatTime(gEvent.start.dateTime.split('T')[1]) : 'All Day'\n      }\n  \n      return event;\n    });\n  } catch (error) {\n    console.error('Error fetching Google Calendar events:', error);\n    return events;\n  }\n\n\n  return events;\n};\n\nconst fetchEvents = async () => {\n  // fetch from events api\n  let firstOfLastMonth = new Date(state.currentDate);\n  firstOfLastMonth.setDate(1);\n  firstOfLastMonth.setMonth(firstOfLastMonth.getMonth() - 1);\n\n  let lastOfNextMonth = new Date(state.currentDate);\n  lastOfNextMonth.setMonth(lastOfNextMonth.getMonth() + 2);\n  lastOfNextMonth.setDate(0);\n\n  let start_date = firstOfLastMonth.toISOString().split('T')[0];\n  let end_date = lastOfNextMonth.toISOString().split('T')[0];\n\n  const response = await fetch(`/wp-json/wp/v2/event?start_date=${start_date}&end_date=${end_date}`);\n  const localEvents = await response.json();\n  \n  // Fetch events from google calendar API\n  const googleCalendarEvents = await fetchGoogleCalendarEvents(start_date, end_date);\n  const allEvents = [...localEvents, ...googleCalendarEvents];\n\n  allEvents.forEach(event => {\n    if(!state.events.find(e => e.id === event.id)) {\n      state.events.push(event);\n    }\n  })\n\n  state.events.sort((a, b) => new Date(a.event_date) - new Date(b.event_date));\n}\n\nconst { state, actions, callbacks } = store( 'iowa-aea-theme/events-list', {\n  state: {\n    events: [],\n    visibleEvents: 3,\n    topEventId: null,\n    currentDate: new Date().toISOString().split('T')[0],\n    currentMonth: new Date().toISOString().split('T')[0].slice(0, 7),\n    apiKey: '',\n    calendarIDs: []\n  },\n  actions: {\n    loadEvents: async () => {\n      let context = getContext();\n      state.apiKey = context.apiKey || '';\n      state.calendarIDs = context.calendarIds || [];\n\n      await fetchEvents();\n\n      if(state.topEventId === null) {\n        let currentDate = state.currentDate;\n        let firstOfDate = state.events.find(event => event.event_date === currentDate);\n\n        state.topEventId = firstOfDate?.id || state.events.find(event => event.event_date >= currentDate)?.id;\n\n        if(!state.topEventId && state.events.length) {\n          state.topEventId = state.events[0].id;\n        }\n\n        // set button states\n        callbacks.checkButtonStates();\n      }\n\n      actions.updateEventsView();\n    },\n\n    updateEventsView: () => {\n      let eventsList = document.querySelector('.events-list')\n\n      if(!eventsList) return;\n\n      // Load chunk of events\n      let chunkStart = state.events.map(event => event.id).indexOf(state.topEventId);\n      const chunk = state.events.slice(chunkStart, chunkStart +state.visibleEvents);\n\n      eventsList.innerHTML = chunk.map(event => `\n        <li>\n          <div class='event-item'>\n            <div class='event-date'>${ formatDate( event.event_date ) }</div>\n            <div class='event-details'>\n              <strong class='event-title'>${ event.title.rendered }</strong>\n              <span class='event-time'>${ formatTime(event.event_time) }</span>\n              </div>\n          </div>\n        </li>\n      `).join('');\n    }\n  },\n  callbacks: {\n    scrollEvents: () => {\n      state.topEventId = state.events[state.events.map(event => event.id).indexOf(state.topEventId) + 1]?.id || null;\n      if (state.events.map(event => event.id).indexOf(state.topEventId) > state.events.length - state.visibleEvents) {\n        state.topEventId = state.events[state.events.length - state.visibleEvents]?.id || null;\n      } else {\n        actions.updateEventsView();\n      }\n      \n      if(state.events.map(event => event.id).indexOf(state.topEventId) > state.events.length - state.visibleEvents - 1){\n        state.currentDate = new Date(new Date(state.currentDate).setDate(new Date(state.currentDate).getDate() + 1)).toISOString().split('T')[0];\n        actions.loadEvents();\n      }\n\n      // set button states\n      callbacks.checkButtonStates();\n    },\n    scrollBackEvents: () => {\n      state.topEventId = state.events[state.events.map(event => event.id).indexOf(state.topEventId) - 1]?.id || state.events[0]?.id;\n      actions.updateEventsView();\n\n      // set button states\n      if(state.events[0]?.id === state.topEventId) {\n        document.querySelector('.load-previous').disabled = true;\n      }\n\n      // set button states\n      callbacks.checkButtonStates();\n    },\n    resetEvents: () => {\n      state.topEventId = null;\n      actions.loadEvents();\n    },\n    checkButtonStates: () => {\n      let loadPreviousButton = document.querySelector('.load-previous');\n      if(loadPreviousButton) {\n        loadPreviousButton.disabled = state.events[0]?.id === state.topEventId;\n      }\n\n      let loadNextButton = document.querySelector('.load-next');\n      if(loadNextButton) {\n        loadNextButton.disabled = state.events.map(event => event.id).indexOf(state.topEventId) > state.events.length - state.visibleEvents - 1;\n      }\n    }\n  },\n  init: {}\n});\n"],"names":["store","getContext","getElement","formatDate","dateString","comfortDateString","month","Intl","DateTimeFormat","timeZone","format","Date","day","year","formatTime","timeString","time","modifier","split","hours","minutes","parseInt","toString","fetchGoogleCalendarEvents","start_date","end_date","calendarIDs","state","apiKey","events","length","calendarID","calendarURL","response","fetch","ok","Error","status","data","json","items","map","gEvent","event","id","title","rendered","summary","event_date","start","date","dateTime","event_time","error","console","fetchEvents","firstOfLastMonth","currentDate","setDate","setMonth","getMonth","lastOfNextMonth","toISOString","localEvents","googleCalendarEvents","allEvents","forEach","find","e","push","sort","a","b","actions","callbacks","visibleEvents","topEventId","currentMonth","slice","loadEvents","context","calendarIds","firstOfDate","checkButtonStates","updateEventsView","eventsList","document","querySelector","chunkStart","indexOf","chunk","innerHTML","join","scrollEvents","getDate","scrollBackEvents","disabled","resetEvents","loadPreviousButton","loadNextButton","init"],"sourceRoot":""}