{"version":3,"file":"interactive-map/view.js","mappings":"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","sources":["webpack://interactive-map/./src/interactive-map/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n/* eslint-disable no-console */\nconsole.log( 'Hello World! (from iowa-aea-theme-interactive-map block)' );\n/* eslint-enable no-console */\n\nlet districts = []\nlet aeaInfo = []\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let districtSelect = document.getElementById('district-select');\n\n  fetch('/wp-json/wp/v2/district?per_page=400')\n    .then(response => response.json())\n    .then(data => {\n      districts = data;\n      console.log('Districts:', districts);\n\n      districts = districts.sort((a, b) => a.title.rendered.localeCompare(b.title.rendered));\n\n      districts.forEach(district => {\n        let option = document.createElement('option');\n        option.value = district.id;\n        option.textContent = district.title.rendered;\n        districtSelect.appendChild(option);\n      });\n    })\n    .catch(error => {\n      console.error('Error fetching districts:', error);\n    });\n\n  fetch('/wp-json/wp/v2/aea')\n    .then(response => response.json())\n    .then(data => {\n      aeaInfo = data;\n      console.log('AEAs:', aeaInfo);\n    })\n    .catch(error => {\n      console.error('Error fetching AEAs:', error);\n    });\n\n  districtSelect.addEventListener('change', (event) => {\n    let selectedDistrict = districts.find(district => district.id === parseInt(event.target.value));\n\n    console.log('Selected District:', selectedDistrict);\n    let aeaMaps = document.querySelectorAll('.img-block .svg');\n    aeaMaps.forEach(map => {\n      map.style = '--level: 0';\n    });\n\n    if (selectedDistrict) {\n      // Show the corresponding AEA map\n      let aea = aeaInfo.find(info => info.id == selectedDistrict.aea);\n\n      console.log(aea);\n\n      let aeaMap = document.getElementById(aea.map_id);\n      if (aeaMap) {\n        aeaMap.style = '--level: 11';\n      }\n\n      let aeaInfoBlock = document.getElementById('aea-info');\n      if (aeaInfo) {\n        aeaInfoBlock.innerHTML = '';\n\n        if (aea) {\n          aeaInfoBlock.innerHTML = `\n            <hr />\n            <h3>${aea.title.rendered}</h3>\n            <p>Address: ${aea.address}</p>\n            <p>Phone: ${aea.phone_number}</p>\n          `;\n        }\n      }\n    }\n  });\n\n});"],"names":["console","log","districts","aeaInfo","document","addEventListener","districtSelect","getElementById","fetch","then","response","json","data","sort","a","b","title","rendered","localeCompare","forEach","district","option","createElement","value","id","textContent","appendChild","catch","error","event","selectedDistrict","find","parseInt","target","aeaMaps","querySelectorAll","map","style","aea","info","aeaMap","map_id","aeaInfoBlock","innerHTML","address","phone_number"],"sourceRoot":""}