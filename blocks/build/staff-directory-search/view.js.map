{"version":3,"file":"staff-directory-search/view.js","mappings":"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","sources":["webpack://interactive-map/external module \"@wordpress/interactivity\"","webpack://interactive-map/webpack/bootstrap","webpack://interactive-map/webpack/runtime/make namespace object","webpack://interactive-map/./src/staff-directory-search/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { store, getContext, getElement } from '@wordpress/interactivity';\n\n\nconst { actions, callbacks } = store( 'iowa-aea-theme/staff-directory-search', {\n  actions: {\n    searchStaff: (e) => {\n      e.preventDefault();\n\n      let context = getContext();\n\n      let formData = new FormData(e.target);\n      \n      let queryObj = {}\n      \n      let query = formData.get('staff-name');\n      if(query) queryObj.search = query;\n\n      let contentArea = formData.get('content-area')\n      if(contentArea) queryObj.content_area = contentArea\n\n      let position = formData.get('position')\n      if(position) queryObj.position = position\n\n      let district = formData.get('district')\n      if(district) queryObj.district = district\n\n      let queryString = new URLSearchParams(queryObj).toString();\n\n      // Query Employee Endpoint\n      fetch(`${context.staffEndpoint}?${queryString}`)\n        .then(response => response.json())\n        .then(data => {\n          context.staff = data;\n        });\n    },\n    filterBuildings: () => {\n      let context = getContext();\n      let districtSelect = getElement();\n\n      let district = districtSelect.ref.value;\n\n      // Clear existing options\n      let form = districtSelect.ref.closest('form');\n      let buildingSelect = form.querySelector('select[name=\"school-building\"]');\n      \n      let buildings = context.buildings.filter(building => building.district_id == district)\n      \n      if(district) {\n        buildingSelect.innerHTML = '<option value=\"\">Select a Building</option>';\n        buildings.forEach(building => {\n          let option = document.createElement('option');\n          option.value = building.id;\n          option.textContent = building.name;\n          buildingSelect.appendChild(option);\n        });\n        buildingSelect.disabled = false;\n      } else {\n        buildingSelect.innerHTML = '<option value=\"\">Select a District to view Buildings</option>';\n        buildingSelect.disabled = true;\n      }\n    },\n    filterStaff: () => {\n      let context = getContext();\n      let form = getElement();\n\n      let query = form.ref.querySelector('input[name=\"staff-name\"]').value;\n      let district = form.ref.querySelector('select[name=\"school-district\"]').value;\n      let building = form.ref.querySelector('select[name=\"school-building\"]').value;\n      let area = form.ref.querySelector('select[name=\"content-area\"]').value;\n      let position = form.ref.querySelector('select[name=\"position\"]').value;\n\n\n      let filteredStaff = context.staff.filter(member => {\n        let assignments = Object.keys(member.assignments).map(key => member.assignments[key]);\n\n        return (!query || member.full_name.toLowerCase().includes(query.toLowerCase())) &&\n               (!district || assignments.some(assignment => assignment.district == district)) &&\n               (!building || assignments.some(assignment => assignment.building == building)) &&\n               (!area || assignments.some(assignment => assignment.content_area == area)) &&\n               (!position || member.position == position)\n      });\n\n      // limit to 10 results if no filters are applied\n      if(!query && !district && !building && !area && !position) {\n        filteredStaff = filteredStaff.slice(0, 10);\n      }\n\n      return filteredStaff;\n    },\n    formReset: (e) => {\n      e.preventDefault();\n\n      let form = e.target.closest('form');\n      form.reset();\n      \n      // Reset building select\n      let buildingSelect = form.querySelector('select[name=\"school-building\"]');\n      buildingSelect.innerHTML = '<option value=\"\">Select a District to view Buildings</option>';\n      buildingSelect.disabled = true;\n    }\n  },\n  callbacks: {\n    renderStaffList: () => {\n      let context = getContext();\n\n      let staffList = document.querySelector('.staff-directory-results ul');\n      staffList.innerHTML = '';\n\n      let filteredStaff = context.staff\n      let sortedStaff = sortByAssignmentPriority(filteredStaff);\n\n      sortedStaff.forEach( member => {\n        // Render each staff member\n        let li = document.createElement('li');\n        let staffMemberTemplate = `\n          <div class='staff-member'>\n            <figure class='staff-image'>\n              <img src='${ member.image }' width='135' height='154' alt='${ member.full_name }' />\n            </figure>\n            <div class='staff-info'>\n              <h3 class='staff-name'>${member.full_name}</h3>\n              <div class='staff-position'>${member.position}</div>\n              <div class='staff-email'>${member.email}</div>\n              <div class='staff-phone'>${member.phone}</div>\n            </div>\n          </div>\n        `\n\n        li.innerHTML = staffMemberTemplate;\n\n        staffList.appendChild(li);\n      });\n    },\n    fillFormOptions: () => {\n      let context = getContext();\n\n      let form = getElement();\n      context.districts.forEach(district => {\n        let option = document.createElement('option');\n        option.value = district.id;\n        option.textContent = district.name;\n        form.ref.querySelector('select[name=\"school-district\"]').appendChild(option);\n      });\n      \n      context.positions.sort().forEach(position => {\n        if(typeof position == 'object'){\n          let option = document.createElement('option');\n          option.value = position.name;\n          option.innerText = position.name;\n          form.ref.querySelector('select[name=\"position\"]').appendChild(option);\n\n        } else if(position.trim() != '') {\n          let option = document.createElement('option');\n          option.innerText = position.trim();\n          form.ref.querySelector('select[name=\"position\"]').appendChild(option);\n        }\n      })\n\n      context.contentAreas.sort().forEach(area => {\n        if(typeof area == 'object'){\n          let option = document.createElement('option');\n          option.value = area.id;\n          option.innerText = area.name;\n          form.ref.querySelector('select[name=\"content-area\"]').appendChild(option);\n\n        } else if(area.trim() != '') {\n          let option = document.createElement('option');\n          option.innerText = area.trim();\n          form.ref.querySelector('select[name=\"content-area\"]').appendChild(option);\n        }\n      })\n    },\n    loadStaffData: () => {\n      let context = getContext();\n\n      // Initial fetch of all staff\n      fetch(`${context.staffEndpoint}`)\n        .then(response => response.json())\n        .then(data => {\n          context.staff = data;\n        });\n\n      callbacks.renderStaffList();\n    },\n    loadSearchData: () => {\n      let context = getContext();\n\n      // Initial fetch of all staff\n      fetch(`${context.searchablesEndpoint}`)\n        .then(response => response.json())\n        .then(data => {\n          context.staff = data;\n        });\n    }\n  }\n});\n\nfunction sortByAssignmentPriority(staff){\n  let districtSelect = document.querySelector('#school-district')\n  let buildingSelect = document.querySelector('#school-building')\n  let contentAreaSelect = document.querySelector('#content-area')\n\n  let adjustedItems = staff.map(item => {\n    let newItem = {...item}\n    newItem.assignments_array = []\n\n    if(newItem.assignments) {\n      Object.keys(newItem.assignments).forEach(assignment => {\n        newItem.assignments_array.push(newItem.assignments[assignment])\n      })\n    }\n\n    return newItem\n  })\n\n  let sortedItems = adjustedItems.sort((itemA, itemB) => {\n    if(districtSelect.value != ''){\n      let assignmentA = itemA.assignments_array.find((assignment) => assignment.district == districtSelect.value)\n      let assignmentB = itemB.assignments_array.find((assignment) => assignment.district == districtSelect.value)\n  \n      if(assignmentA.search_priority == ''){ assignmentA.search_priority = 100 }\n      if(assignmentB.search_priority == ''){ assignmentB.search_priority = 100 }\n\n      return assignmentA.search_priority - assignmentB.search_priority || itemA.last_name.localeCompare(itemB.last_name)\n      \n    } else {\n      return 0;\n    }\n  })\n\n  return sortedItems\n}"],"names":["store","getContext","getElement","actions","callbacks","searchStaff","e","preventDefault","context","formData","FormData","target","queryObj","query","get","search","contentArea","content_area","position","district","queryString","URLSearchParams","toString","fetch","staffEndpoint","then","response","json","data","staff","filterBuildings","districtSelect","ref","value","form","closest","buildingSelect","querySelector","buildings","filter","building","district_id","innerHTML","forEach","option","document","createElement","id","textContent","name","appendChild","disabled","filterStaff","area","filteredStaff","member","assignments","Object","keys","map","key","full_name","toLowerCase","includes","some","assignment","slice","formReset","reset","renderStaffList","staffList","sortedStaff","sortByAssignmentPriority","li","staffMemberTemplate","image","email","phone","fillFormOptions","districts","positions","sort","innerText","trim","contentAreas","loadStaffData","loadSearchData","searchablesEndpoint","contentAreaSelect","adjustedItems","item","newItem","assignments_array","push","sortedItems","itemA","itemB","assignmentA","find","assignmentB","search_priority","last_name","localeCompare"],"sourceRoot":""}