{"version":3,"file":"staff-directory-search/view.js","mappings":"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","sources":["webpack://interactive-map/external module \"@wordpress/interactivity\"","webpack://interactive-map/webpack/bootstrap","webpack://interactive-map/webpack/runtime/make namespace object","webpack://interactive-map/./src/staff-directory-search/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { store, getContext, getElement } from '@wordpress/interactivity';\n\n\nconst { actions, callbacks } = store( 'iowa-aea-theme/staff-directory-search', {\n  actions: {\n    searchStaff: (e) => {\n      e.preventDefault();\n\n      let context = getContext();\n\n      context.loading = true;\n\n      let formData = new FormData(e.target);\n      \n      let queryObj = {}\n      \n      let query = formData.get('staff-name');\n      if(query) queryObj.search = query;\n\n      let contentArea = formData.get('content-area')\n      if(contentArea) queryObj.content_area = contentArea\n\n      let position = formData.get('position')\n      if(position) queryObj.position = position\n\n      let district = formData.get('school-district')\n      if(district) queryObj.district = district\n\n      let building = formData.get('school-building')\n      if(building) queryObj.building = building\n\n      let queryString = new URLSearchParams(queryObj).toString();\n\n      console.log(queryString)\n\n      let staffList = document.querySelector('.staff-directory-results ul');\n      staffList.innerHTML = '';\n\n      // Query Employee Endpoint\n      fetch(`${context.staffEndpoint}?${queryString}`)\n        .then(response => response.json())\n        .then(data => {\n          context.staff = data;\n          context.loading = false;\n        });\n    },\n    filterBuildings: () => {\n      let context = getContext();\n      let districtSelect = getElement();\n\n      let district = districtSelect.ref.value;\n\n      // Clear existing options\n      let form = districtSelect.ref.closest('form');\n      let buildingSelect = form.querySelector('select[name=\"school-building\"]');\n      \n      let buildings = context.buildings.filter(building => building.district_id == district)\n      \n      if(district) {\n        buildingSelect.innerHTML = '<option value=\"\">Select a Building</option>';\n        buildings.forEach(building => {\n          let option = document.createElement('option');\n          option.value = building.id;\n          option.textContent = building.name;\n          buildingSelect.appendChild(option);\n        });\n        buildingSelect.disabled = false;\n      } else {\n        buildingSelect.innerHTML = '<option value=\"\">Select a District to view Buildings</option>';\n        buildingSelect.disabled = true;\n      }\n    },\n    filterStaff: () => {\n      let context = getContext();\n      let form = getElement();\n\n      context.loading = true;\n\n      let query = form.ref.querySelector('input[name=\"staff-name\"]').value;\n      let district = form.ref.querySelector('select[name=\"school-district\"]').value;\n      let building = form.ref.querySelector('select[name=\"school-building\"]').value;\n      let area = form.ref.querySelector('select[name=\"content-area\"]').value;\n      let position = form.ref.querySelector('select[name=\"position\"]').value;\n\n\n      let filteredStaff = context.staff.filter(member => {\n        let assignments = Object.keys(member.assignments).map(key => member.assignments[key]);\n\n        return (!query || member.full_name.toLowerCase().includes(query.toLowerCase())) &&\n               (!district || assignments.some(assignment => assignment.district == district)) &&\n               (!building || assignments.some(assignment => assignment.building == building)) &&\n               (!area || assignments.some(assignment => assignment.content_area == area)) &&\n               (!position || member.position == position)\n      });\n\n      // limit to 10 results if no filters are applied\n      if(!query && !district && !building && !area && !position) {\n        filteredStaff = filteredStaff.slice(0, 10);\n      }\n\n      return filteredStaff;\n    },\n    formReset: (e) => {\n      e.preventDefault();\n\n      let form = e.target.closest('form');\n      form.reset();\n      \n      // Reset building select\n      let buildingSelect = form.querySelector('select[name=\"school-building\"]');\n      buildingSelect.innerHTML = '<option value=\"\">Select a District to view Buildings</option>';\n      buildingSelect.disabled = true;\n    }\n  },\n  callbacks: {\n    renderStaffList: () => {\n      let context = getContext();\n\n      let staffList = document.querySelector('.staff-directory-results ul');\n      staffList.innerHTML = '';\n\n      let filteredStaff = context.staff\n\n      let sortedStaff = sortByAssignmentPriority(filteredStaff);\n\n      sortedStaff.forEach( member => {\n        // Render each staff member\n        let li = document.createElement('li');\n        let staffMemberTemplate = `\n          <div class='staff-member'>\n            <figure class='staff-image'>\n              <img src='${ member.image }' width='135' height='154' alt='${ member.full_name }' />\n            </figure>\n            <div class='staff-info'>\n              <h3 class='staff-name'>${member.full_name}</h3>\n              <div class='staff-position'>${member.position}</div>\n              <div class='staff-email'>${member.email}</div>\n              <div class='staff-phone'>${member.phone}</div>\n            </div>\n          </div>\n        `\n\n        li.innerHTML = staffMemberTemplate;\n\n        staffList.appendChild(li);\n      });\n\n      if(sortedStaff.length === 0 && !context.loading) {\n        let li = document.createElement('li');\n        li.innerHTML = `<p>No staff members found matching your criteria. Please try adjusting your search.</p>`;\n        staffList.appendChild(li);\n      }\n    },\n    fillFormOptions: () => {\n      let context = getContext();\n      context.loading = true;\n\n      let form = getElement();\n\n      context.districts.forEach(district => {\n        let option = document.createElement('option');\n        option.value = district.id;\n        option.textContent = district.name;\n        form.ref.querySelector('select[name=\"school-district\"]').appendChild(option);\n      });\n      \n      context.positions.sort().forEach(position => {\n        if(typeof position == 'object'){\n          let option = document.createElement('option');\n          option.value = position.name;\n          option.innerText = position.name;\n          form.ref.querySelector('select[name=\"position\"]').appendChild(option);\n\n        } else if(position.trim() != '') {\n          let option = document.createElement('option');\n          option.innerText = position.trim();\n          form.ref.querySelector('select[name=\"position\"]').appendChild(option);\n        }\n      })\n\n      context.contentAreas.sort().forEach(area => {\n        if(typeof area == 'object'){\n          let option = document.createElement('option');\n          option.value = area.id;\n          option.innerText = area.name;\n          form.ref.querySelector('select[name=\"content-area\"]').appendChild(option);\n\n        } else if(area.trim() != '') {\n          let option = document.createElement('option');\n          option.innerText = area.trim();\n          form.ref.querySelector('select[name=\"content-area\"]').appendChild(option);\n        }\n      })\n    },\n    loadStaffData: () => {\n      let context = getContext();\n\n      context.loading = true;\n      \n      // Initial fetch of all staff\n      fetch(`${context.staffEndpoint}`)\n        .then(response => response.json())\n        .then(data => {\n          context.staff = data;\n        })\n        .finally(() => {\n          context.loading = false;\n        });\n    }\n  }\n});\n\nfunction sortByAssignmentPriority(staff){\n  let districtSelect = document.querySelector('#school-district')\n  let buildingSelect = document.querySelector('#school-building')\n  let contentAreaSelect = document.querySelector('#content-area')\n\n  let adjustedItems = staff.map(item => {\n    let newItem = {...item}\n    newItem.assignments_array = []\n\n    if(newItem.assignments) {\n      Object.keys(newItem.assignments).forEach(assignment => {\n        newItem.assignments_array.push(newItem.assignments[assignment])\n      })\n    }\n\n    return newItem\n  })\n\n  let sortedItems = adjustedItems.sort((itemA, itemB) => {\n    if(districtSelect.value != ''){\n      let assignmentA = itemA.assignments_array.find((assignment) => assignment.district == districtSelect.value)\n      let assignmentB = itemB.assignments_array.find((assignment) => assignment.district == districtSelect.value)\n  \n      if(!Object.hasOwnProperty(assignmentA, 'search_priority') || assignmentA.search_priority == ''){ assignmentA = {...assignmentA, search_priority: 100} }\n      if(!Object.hasOwnProperty(assignmentB, 'search_priority') || assignmentB.search_priority == ''){ assignmentB = {...assignmentB, search_priority: 100} }\n\n      return assignmentA.search_priority - assignmentB.search_priority || itemA.last_name.localeCompare(itemB.last_name)\n      \n    } else {\n      return 0;\n    }\n  })\n\n  return sortedItems\n}"],"names":["store","getContext","getElement","actions","callbacks","searchStaff","e","preventDefault","context","loading","formData","FormData","target","queryObj","query","get","search","contentArea","content_area","position","district","building","queryString","URLSearchParams","toString","console","log","staffList","document","querySelector","innerHTML","fetch","staffEndpoint","then","response","json","data","staff","filterBuildings","districtSelect","ref","value","form","closest","buildingSelect","buildings","filter","district_id","forEach","option","createElement","id","textContent","name","appendChild","disabled","filterStaff","area","filteredStaff","member","assignments","Object","keys","map","key","full_name","toLowerCase","includes","some","assignment","slice","formReset","reset","renderStaffList","sortedStaff","sortByAssignmentPriority","li","staffMemberTemplate","image","email","phone","length","fillFormOptions","districts","positions","sort","innerText","trim","contentAreas","loadStaffData","finally","contentAreaSelect","adjustedItems","item","newItem","assignments_array","push","sortedItems","itemA","itemB","assignmentA","find","assignmentB","hasOwnProperty","search_priority","last_name","localeCompare"],"sourceRoot":""}